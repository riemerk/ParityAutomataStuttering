In this section the Linear Time Temporal Fixpoint Logic or shorter linear time $\mu$-calculus is described. This is obtained by adding the fixpoint operators $\mu$ and $\nu$ to linear temporal logic (LTL). In this thesis we want to work with an evaluation game and therefore choose to only allow negations in front of propositional variables. This does not change the expressiveness of this logic since we can use de morgan laws (of zo iets) to rewrite formulas but it does force us to explicitely define the Return operator. Most of the definitions in this section are adapted from sections 2 and 3 of  the lecture notes of Yde Venema \cite{venema2024modalmucalculus} but changed to the case of linear time $\mu$-calculus. For full clarity we give all of these definitions.
\subsection*{Syntax}
First we start by defining the $\mutl$ formulas as syntactic objects and define some notions about formulas.
\begin{definition}\label{def:mutempform}
 Let $\Psf$ be a set of propositional variabWe define the collection $\mutl$ of \textbf{temporal fixpoint formulas} over $\Psf$ as follows:
\[
\phi ::= \top \mid \bot \mid p\mid\overline{p}\mid (\phi\land\phi)\mid(\phi\lor\phi)\mid\deo\phi\mid\nu x.\phi\mid \mu x.\phi\mid \phi U\phi\mid \phi R\phi
\]
where  $p, x \in\Psf$ are propositional variables. Furthermore we constrain the formation of formulas of the type $\mu x. \phi$ and $\nu x.\phi$ namely that $x$ can only occure positively so in the form of $x$ and not in the form of $\overline{x}$ in $\phi$. We use the symbol $\eta$ to denote either $\mu$ or $\nu$ In order to increase readibility we use a dot in a fixpoint formula to indicate that the fixpoint has maximal scope. Namely
\(\mu x. \deo x\lor q\) means $\mu x (\deo x \lor q)$ and not $(\mu x \deo x)\lor q$.

Parity: We define the parity of $\mu$ and $U$ as odd and of $\nu$ and $R$ as even.
\end{definition}
\textcolor{red}{Twee dingen -> Moet ik hier aparte P voor prop en X voor variables gebruiken en hoe te laten zien dat het equivalent is aan verhaal van amelie. En hier citeren naar Yde??}
\subsubsection*{Free and bound variables}
We need to make a distinction between variables that are binded by a fixpoint operator and those wo are not.
\begin{definition}
 Let $\phi$ be a formula in $\mutl$. The sets $FV(\phi)$ and $BV(\phi)$ of respectively the \emph{free} and \emph{bound} variables are defined by the following induction on $\phi$
\[
 \begin{array}{llllll}
  FV(\phi)          &:= \emptyset                  & \text{and} & BV(\phi)          & :=\emptyset              &\text{if }\phi\in\{\top,\bot\}\\
  FV(\phi)          &:= \{p\}                      & \text{and} & BV(\phi)          & :=\emptyset              &\text{if }\phi\in\{p,\overline{p}\}\\
  FV(\phi\star\psi) &:= FV(\phi)\cup FV(\psi)      & \text{and} & BV(\phi\star\psi) & := BV(\phi)\cup BV(\psi) &\text{where }\star\in\{\lor,\land, U, R\}   \\
  FV(\deo\phi)      &:= FV(\phi)                   & \text{and} & BV(\deo\phi)      & := BV(\phi)              &\\

  FV(\eta x.\phi)   &:= FV(\phi) \setminus \{x\}   & \text{and} & BV(\eta x. \phi)  & := BV(\phi) \cup \{x\}   & \text{where }\eta\in\{\mu,\nu\}
 \end{array}
\]
\end{definition}
With this distinction we can characterize $\mutl$ formulas. In the later parts of this thesis we will mostly working with clean and tidy formulas.
\begin{definition}
A formula $\phi\in\mutl$ is \emph{tidy} if $FV(\phi)\cap BV(\phi)=\emptyset$ and \emph{clean} if in addition we can associate a unique subformula of the form $\eta x.\xi$ for every bound variable $x$. In this case we let $\phi_x=\eta_x x. \xi_x$ denote this unique subformula.
\end{definition}

\subsubsection*{Subformulas}
\begin{definition}
 $Sf(\phi)$ of a formula $\phi\in\mutl$
\end{definition}
\subsubsection*{Alternation}
In order to define the acceptance of the $\mu,\nu,U$ and $R$ operators we need to define alternation. This becomes a little trickier then in \cite{venema2024modalmucalculus} and \cite{kupke2020sizematters} since we also have to take the $U$ and $R$ operators into account. Define $\mathcal{F}(\phi)$ by extending the set of bound variables with all subformulas $\psi\in Sf(\phi)$ with the form $\psi=\psi_1 T \psi_2$ with $T\in\{U,R\}$. For $x\in \mathcal{F}(\phi)$ let
\[
 \phi_x = \begin{cases}
           \xi_x & \text{if } x\in BV(\phi)\\
           x & \text{if }x = \phi_1T\phi_2\in Sf(\phi) \text{ with } T\in\{U,R\}
          \end{cases}
\]

\begin{definition}\cite{kupke2020sizematters}
 Let $\phi$ be a clean $\mutl$ formula. The \emph{dependency order} $<_\phi$ on the set $\mathcal{F}(\phi)$ variables of $\phi$ is defined as the last strict partial order such that for $a\in \mathcal{F}$ and $y\in BV(\phi)$  we have $a <_\phi y$ if $\phi_a$ is a proper subformula of $\xi_y$ with $y\in FV(\phi_a)$
\end{definition}
\begin{definition}\cite{kupke2020sizematters}
 Let $\phi$ be a clean $\mutl$ formula. The \emph{dependency order} $<_\phi$ on the bound variables of $\phi$ is defined as the last strict partial order such that $x<_\phi y$ if $\xi_x$ is a proper subformula of $\xi_y$ with $y\in FV(\xi_x)$
\end{definition}
\begin{definition}\cite{kupke2020sizematters}
 Let $\phi\in\mutl$ be a clean formula. A \emph{dependency chain} in $\phi$ of \emph{length d} is a sequence $x_1\dots x_d\in \mathcal{F}(\phi)$ such that $x_1<_\phi x_2\dots <_\phi x_d$; we say such a chain \emph{starts} at $x_d$ and such a chain is \emph{alternating} if $x_i$ and $x_{i+1}$ have different parity, for every $i<d$. For $\eta\in\{\mu,\nu\}$. We call an alternating dependency chan $x_1\dots x_d$ an $\eta$\emph{-chain} if $x_d$ is an $\eta$-variable, and we let $d_\eta(\xi_x)$ denote the length of the longest $\eta$-chain starting at $x$. We write $d_\eta(\xi_x)=0$ if such a chain does not exists.
 \textcolor{red}{Hier zeggen dat je ook over een U kan chainen}. God dat is moeilijk

\end{definition}

\subsubsection*{Fragments}
To describe what the stutter-invariant fragment of $\mutl$ is we first need to define the notion of a fragment.
\begin{definition}
 Define the fragment $\mutl(\mathcal{O})$ for each $\mathcal{O}\subseteq \{\deo, U, R\}$ of $\mutl$ by only allowing the temporal operators in $\mathcal{O}$
\end{definition}

\subsubsection*{Substitution}
\begin{definition}
 Substitution
\end{definition}
\begin{definition}
 Unfolding
\end{definition}

\subsubsection*{The closure set}
\begin{definition}
 Let $\rightarrow_C$ be the binary relation between tidy $\mutl$ formulas given by the following list:
 \begin{enumerate}
  \item $\phi_0\star \phi_1\rightarrow_C\phi_0$, for any $\phi_0, \phi_1\in\mutl$, $\star\in\{\lor,\land\}$ and $i\in\{0,1\}$;
  \item $\deo\phi\rightarrow_C \phi$, for any $\phi\in\mutl$;
  \item $\phi U\psi \rightarrow_C \psi \lor (\phi \land \deo (\phi U\psi))$, for any $\phi,\psi\in\mutl$;
  \item $\phi R\psi \rightarrow_C (\phi\land\psi) \lor (\phi \land \deo (\phi R\psi))$, for any $\phi,\psi\in\mutl$;
  \item $\eta x\phi\rightarrow_C \phi[\eta x.\phi/x]$, for any $\phi\in\mutl$, with $\eta\in\{\mu,\nu\}$.
 \end{enumerate}
We call a $\rightarrow_C$ path $\phi_0\rightarrow_C \phi_1\rightarrow_C\dots\rightarrow_C\phi_n$ a \emph{finite trace}, similarly an \emph{infinite trace} is a sequence $(\phi_i)_{i<\omega}$ such that $\phi_i\rightarrow_C\phi_{i+1}$ for all $i<\omega$.
\end{definition}
\begin{definition}
 We define the relation $\twoheadrightarrow$ as the reflexive and transitive closure of $\rightarrow_C$, and define the \emph{closure} of a tidy formula $\phi$ as the set
 \[
  Cl(\phi):=\{\psi\mid \phi\twoheadrightarrow_C \psi\}.
 \]
 The \emph{closure graph} of $\phi$ is the directed graph $\mathbb{C}_\phi := (Cl(\phi), \rightarrow_C)$.
\end{definition}

\subsubsection*{Guardedness}
\begin{definition}\label{def:guardedmuform}
 A variable $x$ is guarded in a $\mu$-TL formula $\phi$ if every free occurence of $x$ in $\phi$ is in the scope of a modal operator. A formula $\xi\in\mu$-TL is \emph{guarded} if for every subformula of $\xi$ of the form $\eta x.\delta$, $x$ is guarded in $\delta$.
\end{definition}

\begin{theorem}\label{thm:muformequivguarded}\cite[Proposition 3.27]{venema2024modalmucalculus}
 Every formula $\phi$ is equivalent to a guarded formula $\phi_g$
\end{theorem}

\subsection*{Semantics}
Next we have to define what it means for a formula to be satisfied in some model. We start by defining the kind of models we use for $\mutl$.
\begin{definition}\cite[Section 6.1]{demri2016temporal}\label{def:linearmodel}
 An \emph{$\omega$}-word of alphabet $\Sigma$ is an infinite sequence
 \[
  w: \omega \to \Sigma.
 \].
 If $\Sigma=\PP(\Psf)$ we call $w$ a \emph{linear transition system} or \emph{linear (Kripke) model}
\end{definition}

\begin{definition}[Game theoretic semantics](Extension of \cite[Definition 2.20]{venema2024modalmucalculus})
 Given a clean linear fixpoint formula $\phi$ and a linear transition system $w$ we define the evaluation game $\mathcal{E}(\phi, w)$ as a game with players $\exists$ and $\forall$ moving along a board consisting of positions $(\psi, s)\in Cl(\phi)\times \omega$. The addmissible moves are\\
 \begin{tabular}{|c|c|c|}
  \hline
  Position & Player & Admissible moves\\
  \hline
  $(\psi_1\lor\psi_2,i)$& $\exists$ & $\{(\psi_1, i),(\psi_2, i)\}$\\
  $(\psi_1\land\psi_2,i)$& $\forall$ & $\{(\psi_1, i),(\psi_2, i)\}$\\
  $(\deo\psi,i)$&-&$\{(\psi, i+1)\}$\\
  $(\eta_xx.\xi_x, i)$&-&$\{(\xi_x[\eta_x x.\xi_x/x], i)\}$\\
  $(\psi_1 U\psi_2,i)$& $-$ & $\{(\psi_2\lor (\psi_1\land\deo\psi_1 U \psi_2), i)\}$\\
  $(\psi_1 R\psi_2,i)$& $-$ & $\{((\psi_1 \land \psi_2)\lor (\psi_1\land\deo\psi_1 R\psi_2), i)\}$\\
  $(\bot,i)$& $\exists$ & $\emptyset$\\
  $(\top,i)$& $\forall$ & $\emptyset$\\
  $(p,i)$ with $p\in FV(\psi)$ and $p\in w(i)$& $\forall$ & $\emptyset$\\
  $(p,i)$ with $p\in FV(\psi)$ and $p\notin w(i)$& $\exists$ & $\emptyset$\\
  $(\overline{p},i)$ with $p\in FV(\psi)$ and $p\notin w(i)$& $\forall$ & $\emptyset$\\
  $(\overline{p},i)$ with $p\in FV(\psi)$ and $p\in w(i)$& $\exists$ & $\emptyset$\\
\hline
 \end{tabular}\\
\textcolor{red}{Hoe erg is het om hier weer phi en psi te gebruiken?}
 And we define the parity map as following: Let $d = d_{\eta_x}(\xi_x)$ and for $\xi_x$ define.
 \[
  \Omega_\phi(\phi) := \begin{cases}

                         d &\text{if }\phi\in\mathcal{F} \text{ and } d \text{ has parity } \eta_x\\
                         d+1&\phi\in\mathcal{F} \text{ and } d \text{ has parity } \overline{\eta_x}\\
                         0 & \text{else}
                        \end{cases}
 \]
 where we say that $\mu$ has odd and $\nu$ has even parity.

 We define the notion of satisfaction for a formula as the following:
 \[
  w, i\Vdash_g\phi \text{ iff } (\phi, i)\in \text{Win}_\exists(\mathcal{E}(\phi, w)).
 \]
\end{definition}
\begin{proposition}
 We zien dat dit equivalent is aan def 2.40 van Yde. Als je geen subformule bent van eindig veel dan er verder ligt dan ofwel er is geen chain ofwel
\end{proposition}
\begin{proof}
 Misschien als tijd over
\end{proof}
Next to a game theoretic semantics it can also be convenient to use a more algebraic semantic. We will define this in the following way.
\begin{definition}[Algebraic semantics]
 \[
 \begin{array}{llll}
  w, i &\Vdash_a p & \iff& p\in w(i)\\
  w, i &\Vdash_a \overline{p} & \iff &p\notin w(i)\\
  w, i&\Vdash_a \bot &&\text{never}\\
  w, i&\Vdash_a \top &&\text{always}\\
  w, i&\Vdash_a \phi_1\land\phi_2&\iff&w, i\Vdash_a \phi_1 \text{ and }w, i\Vdash_a \phi_2\\
  w, i&\Vdash_a \phi_1\lor\phi_2&\iff &w, i\Vdash_a \phi_1 \text{ or }w, i\Vdash_a \phi_2\\
  w, i&\Vdash_a \deo \phi&\iff &w, i+1\Vdash_a \phi\\
  w, i &\Vdash_a \phi_1U\phi_2 &\iff&\exists j\geq i\text{ such that }w, j\Vdash_a \phi_1 \text{ and} \\
                                 &&&w, k\Vdash_a \phi_2 \text{ for all } k \text{ with }i\leq k<j\\
 w, i &\Vdash_a \phi_1R\phi_2 &\iff &w, j \Vdash_a \phi_1 \text{ for all } j\geq i\text{ or}\\
                                &&&(\exists j\geq i\text{ such that }w, j\Vdash_a \phi_1 \land \phi_2 \text{ and } \\
                                 &&&w, k\Vdash_a \phi_2 \text{ for all } k \text{ with }i\leq k<j)
 \end{array}
\]
 \textcolor{red}{And for fixpoints zelfde maar dan met verzamelingen}
\end{definition}
Now we want to prove that these semantics are equivalent so that we can easily switch between both semantics in this thesis.
\begin{theorem}[Equivalence of the semantics]
 Let $\phi$ be a clean $\mutl$-formula. Then for all $\omega$-words w and all $i\in\omega$ we have
 \[
  w,i\Vdash_g \phi \iff w, i\Vdash_a \phi
 \]
\end{theorem}
\begin{proof}
This proof will follow induction on the formula $\phi$. The atomic, boolean and fixpoint cases are covered by Theorem 3.32 of Venema \cite{venema2024modalmucalculus}. So we will only proof the cases for $U$ and $R$
\textcolor{red}{TODO}
\end{proof}
This allows us to write $w,i\Vdash\phi$ instead of $w,i\Vdash_g\phi$ or $w,i\Vdash_a\phi$  to denote the satisfaction of $\phi$ and switch between both semantics in a proof as we see convenient.
